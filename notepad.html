<html>
<head>
<title id="myTitle" onload="var myTitle=this ;">HTML5 Notepad</title>
<link rel="icon" type="image/gif" href="/notepad-icon.gif" />
<script>

function checkTime(i) {
  if (i<10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
}

function saveDoc() {
  var d = new Date() ;
  var monthArray = new Array();
  monthArray[0] = "January"; monthArray[1] = "February"; monthArray[2] = "March"; monthArray[3] = "April";
  monthArray[4] = "May"; monthArray[5] = "June"; monthArray[6] = "July"; monthArray[7] = "August";
  monthArray[8] = "September"; monthArray[9] = "October"; monthArray[10] = "November"; monthArray[11] = "December";
  var month = monthArray[d.getMonth()];
  var date = d.getDate() ;
  var hour = d.getHours() ;
  var timePeriod = "am" ;
  if (hour>12) {
    hour -= 12 ;
    timePeriod = "pm" ;
  }
  var minute = d.getMinutes() ;
  minute = checkTime(minute) ;
  localStorage.saveString = month+" "+date+" at "+hour+":"+minute+" "+timePeriod ;
  myTitle.innerHTML="Saved at " + hour+":"+minute ;
  localStorage.notepad = notepad.innerHTML ;
}

function loadDoc() {
  if (typeof localStorage.notepad !== "undefined" && localStorage.notepad !== "") {
    // If user has been here before and their notepad was not empty when they left
    notepad.innerHTML = localStorage.notepad ;
    console.log('found previously saved notepad contents.') ;
  } else {
    notepad.innerHTML = "Welcome to Austin Heiman's HTML5 localStorage notepad!\nNotes typed here will be auto-magically saved for next time!" ;
    console.log('no previously saved notepad contents found.') ;
  }
  notepad.focus() ;
  console.log('notepad content loaded.') ;
}

</script>
<style>
body {
  margin:0px;
}
#notepad {
  margin:0px;
  background-color:#111;
  color:#eee;
  padding:15px;
  font-family:'courier new';
  font-size:1em;
}
</style>
</head>
<body onload="loadDoc(); ">
<div id="notepad" contenteditable onload="var notepad=this ;" onkeyup="saveDoc()" onmouseout="saveDoc()" onblur="saveDoc()"></div>
</body>
</html>
